(function(){'use strict';const STORAGE_KEY = 'admin_menu_state';function saveMenuState(menuId,isExpanded){try{const state = JSON.parse(localStorage.getItem(STORAGE_KEY)|| '{}');state[menuId] = isExpanded;localStorage.setItem(STORAGE_KEY,JSON.stringify(state));}catch(e){console.warn('Não foi possível salvar estado do menu:',e);}}function getMenuState(menuId){try{const state = JSON.parse(localStorage.getItem(STORAGE_KEY)|| '{}');return state[menuId];}catch(e){console.warn('Não foi possível recuperar estado do menu:',e);return null;}}function restoreMenuStates(){const menus = document.querySelectorAll('[data-bs-toggle="collapse"]');menus.forEach(function(menuHeader){const targetId = menuHeader.getAttribute('href').substring(1);const isExpanded = getMenuState(targetId);if(isExpanded === true){const targetElement = document.getElementById(targetId);if(targetElement){const bsCollapse = new bootstrap.Collapse(targetElement,{toggle:false});bsCollapse.show();}}});}function setupMenuListeners(){const menus = document.querySelectorAll('[data-bs-toggle="collapse"]');menus.forEach(function(menuHeader){const targetId = menuHeader.getAttribute('href').substring(1);const targetElement = document.getElementById(targetId);if(targetElement){targetElement.addEventListener('shown.bs.collapse',function(){saveMenuState(targetId,true);});targetElement.addEventListener('hidden.bs.collapse',function(){saveMenuState(targetId,false);});}});}function highlightActiveMenuItem(){const currentPath = window.location.pathname;const currentSearch = window.location.search;const currentUrl = currentPath + currentSearch;document.querySelectorAll('.sidebar-submenu-item').forEach(function(item){item.classList.remove('active');});document.querySelectorAll('.sidebar-submenu-item').forEach(function(item){const itemHref = item.getAttribute('href');if(itemHref === currentUrl){item.classList.add('active');const parentCollapse = item.closest('.collapse');if(parentCollapse){const bsCollapse = new bootstrap.Collapse(parentCollapse,{toggle:false});bsCollapse.show();}}else if(currentSearch === '' && itemHref === currentPath){item.classList.add('active');const parentCollapse = item.closest('.collapse');if(parentCollapse){const bsCollapse = new bootstrap.Collapse(parentCollapse,{toggle:false});bsCollapse.show();}}});}function setupKeyboardNavigation(){const menuItems = document.querySelectorAll('.sidebar-menu-header,.sidebar-submenu-item');menuItems.forEach(function(item,index){item.addEventListener('keydown',function(e){let targetIndex;switch(e.key){case 'ArrowDown':e.preventDefault();targetIndex =(index + 1)% menuItems.length;menuItems[targetIndex].focus();break;case 'ArrowUp':e.preventDefault();targetIndex =(index - 1 + menuItems.length)% menuItems.length;menuItems[targetIndex].focus();break;case 'Enter':case ' ':e.preventDefault();item.click();break;}});});}function removeNoJsClass(){document.documentElement.classList.remove('no-js');}function init(){removeNoJsClass();setupMenuListeners();restoreMenuStates();highlightActiveMenuItem();setupKeyboardNavigation();console.log('✓ Menu admin inicializado com sucesso');}if(document.readyState === 'loading'){document.addEventListener('DOMContentLoaded',init);}else{init();}})();