(function(){'use strict';const STORAGE_KEY = 'high-contrast-mode';const HIGH_CONTRAST_CLASS = 'high-contrast';function initHighContrast(){const savedPreference = localStorage.getItem(STORAGE_KEY);if(savedPreference === 'enabled'){enableHighContrast();}createToggleButton();document.addEventListener('keydown',handleKeyboardShortcut);}function createToggleButton(){if(document.getElementById('high-contrast-toggle')){return;}const button = document.createElement('button');button.id = 'high-contrast-toggle';button.className = 'high-contrast-toggle';button.setAttribute('aria-label','Alternar modo de alto contraste');button.setAttribute('aria-pressed','false');button.setAttribute('title','Ativar/Desativar Alto Contraste(Ctrl+Alt+C)');button.innerHTML = `
<span class="high-contrast-toggle-icon" aria-hidden="true">‚óê</span>
<span class="high-contrast-toggle-text">Alto Contraste</span>
`;button.addEventListener('click',toggleHighContrast);document.body.appendChild(button);updateButtonState();}function toggleHighContrast(){const isEnabled = document.documentElement.classList.contains(HIGH_CONTRAST_CLASS);if(isEnabled){disableHighContrast();}else{enableHighContrast();}}function enableHighContrast(){document.documentElement.classList.add(HIGH_CONTRAST_CLASS);document.body.classList.add(HIGH_CONTRAST_CLASS);localStorage.setItem(STORAGE_KEY,'enabled');updateButtonState();announceToScreenReader('Modo de alto contraste ativado');}function disableHighContrast(){document.documentElement.classList.remove(HIGH_CONTRAST_CLASS);document.body.classList.remove(HIGH_CONTRAST_CLASS);localStorage.setItem(STORAGE_KEY,'disabled');updateButtonState();announceToScreenReader('Modo de alto contraste desativado');}function updateButtonState(){const button = document.getElementById('high-contrast-toggle');if(!button)return;const isEnabled = document.documentElement.classList.contains(HIGH_CONTRAST_CLASS);button.setAttribute('aria-pressed',isEnabled ? 'true':'false');const text = button.querySelector('.high-contrast-toggle-text');if(text){text.textContent = isEnabled ? 'Contraste Normal':'Alto Contraste';}}function handleKeyboardShortcut(event){if(event.ctrlKey && event.altKey && event.key === 'c'){event.preventDefault();toggleHighContrast();}}function announceToScreenReader(message){let announcer = document.getElementById('a11y-announcer');if(!announcer){announcer = document.createElement('div');announcer.id = 'a11y-announcer';announcer.setAttribute('role','status');announcer.setAttribute('aria-live','polite');announcer.setAttribute('aria-atomic','true');announcer.style.position = 'absolute';announcer.style.left = '-10000px';announcer.style.width = '1px';announcer.style.height = '1px';announcer.style.overflow = 'hidden';document.body.appendChild(announcer);}announcer.textContent = '';setTimeout(()=>{announcer.textContent = message;},100);}function checkSystemPreferences(){if(window.matchMedia && window.matchMedia('(prefers-contrast:high)').matches){console.log('Sistema configurado para alto contraste');}}if(document.readyState === 'loading'){document.addEventListener('DOMContentLoaded',initHighContrast);}else{initHighContrast();}checkSystemPreferences();window.HighContrastMode ={enable:enableHighContrast,disable:disableHighContrast,toggle:toggleHighContrast,isEnabled:function(){return document.documentElement.classList.contains(HIGH_CONTRAST_CLASS);}};})();