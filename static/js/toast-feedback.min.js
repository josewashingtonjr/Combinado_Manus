class ToastManager{constructor(){this.container = null;this.template = null;this.toasts = new Map();this.init();}init(){if(document.readyState === 'loading'){document.addEventListener('DOMContentLoaded',()=> this.setup());}else{this.setup();}}setup(){this.container = document.getElementById('toast-container');this.template = document.getElementById('toast-template');if(!this.container || !this.template){console.warn('Toast container ou template não encontrado');return;}this.convertFlashMessages();}convertFlashMessages(){const flashAlerts = document.querySelectorAll('.alert:not(.toast-converted)');flashAlerts.forEach(alert =>{const message = alert.textContent.trim();let type = 'info';if(alert.classList.contains('alert-success'))type = 'success';else if(alert.classList.contains('alert-danger')|| alert.classList.contains('alert-error'))type = 'error';else if(alert.classList.contains('alert-warning'))type = 'warning';this.show(message,type);alert.classList.add('toast-converted');alert.style.display = 'none';});}show(message,type = 'info',duration = 5000){if(!this.container || !this.template){console.warn('Toast system não inicializado');return null;}const toastId = `toast-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;const toastElement = this.template.content.cloneNode(true).querySelector('.toast-feedback');toastElement.id = toastId;toastElement.classList.add(`toast-${type}`);const messageElement = toastElement.querySelector('.toast-text');messageElement.textContent = message;const closeButton = toastElement.querySelector('.toast-close');closeButton.addEventListener('click',()=> this.hide(toastId));this.container.appendChild(toastElement);this.toasts.set(toastId,{element:toastElement,timeout:null});if(duration > 0){const timeout = setTimeout(()=> this.hide(toastId),duration);this.toasts.get(toastId).timeout = timeout;}toastElement.addEventListener('mouseenter',()=> this.pauseAutoDismiss(toastId));toastElement.addEventListener('mouseleave',()=> this.resumeAutoDismiss(toastId,duration));return toastId;}hide(toastId){const toast = this.toasts.get(toastId);if(!toast)return;if(toast.timeout){clearTimeout(toast.timeout);}toast.element.classList.add('toast-exit');setTimeout(()=>{if(toast.element.parentNode){toast.element.parentNode.removeChild(toast.element);}this.toasts.delete(toastId);},300);}pauseAutoDismiss(toastId){const toast = this.toasts.get(toastId);if(!toast || !toast.timeout)return;clearTimeout(toast.timeout);toast.timeout = null;const progressBar = toast.element.querySelector('.toast-progress::after');if(progressBar){progressBar.style.animationPlayState = 'paused';}}resumeAutoDismiss(toastId,duration){const toast = this.toasts.get(toastId);if(!toast)return;const timeout = setTimeout(()=> this.hide(toastId),2000);toast.timeout = timeout;}hideAll(){this.toasts.forEach((_,toastId)=> this.hide(toastId));}success(message,duration = 5000){return this.show(message,'success',duration);}error(message,duration = 5000){return this.show(message,'error',duration);}warning(message,duration = 5000){return this.show(message,'warning',duration);}info(message,duration = 5000){return this.show(message,'info',duration);}}const toastManager = new ToastManager();window.showToast =(message,type,duration)=> toastManager.show(message,type,duration);window.toast ={success:(msg,duration)=> toastManager.success(msg,duration),error:(msg,duration)=> toastManager.error(msg,duration),warning:(msg,duration)=> toastManager.warning(msg,duration),info:(msg,duration)=> toastManager.info(msg,duration),hide:(id)=> toastManager.hide(id),hideAll:()=> toastManager.hideAll()};if(typeof module !== 'undefined' && module.exports){module.exports = ToastManager;}