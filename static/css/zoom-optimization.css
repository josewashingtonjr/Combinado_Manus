/* ==============================================================================
   OTIMIZAÇÃO PARA ZOOM - Requirement 7.2
   Garante que o layout funcione corretamente com zoom de até 200%
   ============================================================================== */

/* ==============================================================================
   CONFIGURAÇÕES BASE PARA ZOOM
   ============================================================================== */

/* Prevenir quebras de layout com zoom */
html {
    /* Permitir zoom sem restrições */
    -ms-text-size-adjust: 100%;
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
    
    /* Garantir que o viewport seja respeitado */
    overflow-x: hidden;
    max-width: 100vw;
}

body {
    /* Prevenir scroll horizontal com zoom */
    overflow-x: hidden;
    max-width: 100%;
    
    /* Garantir que o conteúdo seja responsivo */
    min-width: 0;
}

/* ==============================================================================
   CONTAINERS E LAYOUTS FLEXÍVEIS
   ============================================================================== */

/* Containers devem se adaptar ao zoom */
.container,
.container-fluid,
.container-sm,
.container-md,
.container-lg,
.container-xl {
    max-width: 100%;
    padding-left: clamp(8px, 2vw, 16px);
    padding-right: clamp(8px, 2vw, 16px);
    overflow-x: hidden;
}

/* Rows devem quebrar em colunas com zoom */
.row {
    max-width: 100%;
    margin-left: 0;
    margin-right: 0;
    overflow-x: hidden;
}

/* Colunas devem empilhar com zoom alto */
@media (min-resolution: 1.5dppx) {
    .row > [class*="col-"] {
        flex: 0 0 100%;
        max-width: 100%;
        padding-left: 8px;
        padding-right: 8px;
    }
}

/* ==============================================================================
   TIPOGRAFIA RESPONSIVA AO ZOOM
   ============================================================================== */

/* Usar unidades relativas para tipografia */
body {
    /* Tamanho base que escala com zoom */
    font-size: clamp(14px, 1rem, 18px);
    line-height: 1.6;
}

/* Títulos com tamanhos flexíveis */
h1 {
    font-size: clamp(1.5rem, 4vw, 2.5rem);
    line-height: 1.2;
    margin-bottom: clamp(12px, 2vh, 24px);
    word-wrap: break-word;
    overflow-wrap: break-word;
}

h2 {
    font-size: clamp(1.25rem, 3.5vw, 2rem);
    line-height: 1.25;
    margin-bottom: clamp(10px, 1.5vh, 20px);
    word-wrap: break-word;
    overflow-wrap: break-word;
}

h3 {
    font-size: clamp(1.125rem, 3vw, 1.75rem);
    line-height: 1.3;
    margin-bottom: clamp(8px, 1vh, 16px);
    word-wrap: break-word;
    overflow-wrap: break-word;
}

h4 {
    font-size: clamp(1rem, 2.5vw, 1.5rem);
    line-height: 1.35;
    margin-bottom: clamp(8px, 1vh, 16px);
    word-wrap: break-word;
    overflow-wrap: break-word;
}

h5, h6 {
    font-size: clamp(0.875rem, 2vw, 1.25rem);
    line-height: 1.4;
    margin-bottom: clamp(6px, 0.75vh, 12px);
    word-wrap: break-word;
    overflow-wrap: break-word;
}

/* Parágrafos e texto */
p, span, div, li, td, th, label {
    word-wrap: break-word;
    overflow-wrap: break-word;
    hyphens: auto;
    max-width: 100%;
}

/* ==============================================================================
   BOTÕES E ELEMENTOS INTERATIVOS
   ============================================================================== */

/* Botões devem manter tamanho adequado com zoom */
.btn,
button,
[type="button"],
[type="submit"],
[type="reset"] {
    /* Usar padding relativo */
    padding: clamp(8px, 1.5vh, 16px) clamp(12px, 2vw, 24px);
    
    /* Tamanho de fonte flexível */
    font-size: clamp(14px, 1rem, 18px);
    
    /* Altura mínima flexível */
    min-height: clamp(44px, 6vh, 56px);
    
    /* Permitir quebra de texto em botões */
    white-space: normal;
    word-wrap: break-word;
    overflow-wrap: break-word;
    
    /* Garantir que o botão não exceda o container */
    max-width: 100%;
    box-sizing: border-box;
}

/* Botões em grupo devem empilhar com zoom */
.btn-group {
    flex-wrap: wrap;
    gap: clamp(4px, 1vw, 12px);
}

@media (min-resolution: 1.5dppx) {
    .btn-group {
        flex-direction: column;
    }
    
    .btn-group .btn {
        width: 100%;
    }
}

/* ==============================================================================
   FORMULÁRIOS RESPONSIVOS AO ZOOM
   ============================================================================== */

/* Campos de formulário com tamanho flexível */
.form-control,
input,
select,
textarea {
    /* Tamanho de fonte que previne zoom no iOS */
    font-size: clamp(16px, 1rem, 18px);
    
    /* Padding flexível */
    padding: clamp(8px, 1.5vh, 16px) clamp(12px, 2vw, 20px);
    
    /* Altura mínima flexível */
    min-height: clamp(44px, 6vh, 56px);
    
    /* Garantir largura total */
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
}

/* Labels com espaçamento adequado */
label {
    display: block;
    margin-bottom: clamp(4px, 0.5vh, 8px);
    font-size: clamp(14px, 0.875rem, 16px);
}

/* Form groups com espaçamento flexível */
.form-group {
    margin-bottom: clamp(12px, 2vh, 24px);
}

/* ==============================================================================
   CARDS E CONTAINERS
   ============================================================================== */

/* Cards com padding flexível */
.card {
    max-width: 100%;
    overflow: hidden;
    margin-bottom: clamp(12px, 2vh, 24px);
}

.card-body {
    padding: clamp(12px, 2vw, 24px);
}

.card-header,
.card-footer {
    padding: clamp(10px, 1.5vw, 20px);
}

/* Títulos de card */
.card-title {
    font-size: clamp(1rem, 2.5vw, 1.5rem);
    margin-bottom: clamp(8px, 1vh, 16px);
    word-wrap: break-word;
}

.card-text {
    font-size: clamp(0.875rem, 1.5vw, 1rem);
    line-height: 1.6;
}

/* ==============================================================================
   TABELAS RESPONSIVAS AO ZOOM
   ============================================================================== */

/* Tabelas devem ter scroll horizontal com zoom */
.table-responsive {
    display: block;
    width: 100%;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
}

/* Células de tabela com padding flexível */
table th,
table td {
    padding: clamp(8px, 1.5vw, 16px);
    font-size: clamp(14px, 0.875rem, 16px);
    word-wrap: break-word;
    overflow-wrap: break-word;
}

/* Tabelas empilham em zoom alto */
@media (min-resolution: 1.5dppx) {
    .table-zoom-stack thead {
        display: none;
    }
    
    .table-zoom-stack tbody,
    .table-zoom-stack tr,
    .table-zoom-stack td {
        display: block;
        width: 100%;
    }
    
    .table-zoom-stack tr {
        margin-bottom: 16px;
        border: 1px solid #dee2e6;
        border-radius: 8px;
        padding: 12px;
    }
    
    .table-zoom-stack td {
        text-align: left;
        padding: 8px 0;
        border: none;
    }
    
    .table-zoom-stack td::before {
        content: attr(data-label);
        font-weight: 600;
        display: block;
        margin-bottom: 4px;
        color: #495057;
    }
}

/* ==============================================================================
   NAVEGAÇÃO E MENUS
   ============================================================================== */

/* Navbar responsiva ao zoom */
.navbar {
    padding: clamp(8px, 1.5vh, 16px) clamp(12px, 2vw, 24px);
    flex-wrap: wrap;
}

.navbar-brand {
    font-size: clamp(1rem, 2.5vw, 1.5rem);
    padding: clamp(4px, 0.75vh, 8px) 0;
}

.navbar-nav {
    flex-wrap: wrap;
    gap: clamp(4px, 1vw, 12px);
}

.navbar-nav .nav-link {
    padding: clamp(6px, 1vh, 12px) clamp(10px, 1.5vw, 16px);
    font-size: clamp(14px, 0.875rem, 16px);
}

/* Dropdown menus */
.dropdown-menu {
    max-width: 100vw;
    font-size: clamp(14px, 0.875rem, 16px);
}

.dropdown-item {
    padding: clamp(8px, 1.5vh, 16px) clamp(12px, 2vw, 20px);
    white-space: normal;
    word-wrap: break-word;
}

/* ==============================================================================
   MODAIS E OVERLAYS
   ============================================================================== */

/* Modais responsivos ao zoom */
.modal-dialog {
    max-width: calc(100vw - clamp(16px, 4vw, 32px));
    margin: clamp(8px, 2vh, 16px);
}

.modal-content {
    max-width: 100%;
}

.modal-header,
.modal-body,
.modal-footer {
    padding: clamp(12px, 2vw, 24px);
}

.modal-title {
    font-size: clamp(1.125rem, 2.5vw, 1.5rem);
    word-wrap: break-word;
}

/* ==============================================================================
   ALERTAS E MENSAGENS
   ============================================================================== */

/* Alertas com padding flexível */
.alert {
    padding: clamp(12px, 2vw, 20px);
    margin-bottom: clamp(12px, 2vh, 20px);
    font-size: clamp(14px, 0.875rem, 16px);
    word-wrap: break-word;
    overflow-wrap: break-word;
}

.alert-heading {
    font-size: clamp(1rem, 2vw, 1.25rem);
    margin-bottom: clamp(6px, 1vh, 12px);
}

/* ==============================================================================
   BADGES E LABELS
   ============================================================================== */

/* Badges com tamanho flexível */
.badge {
    padding: clamp(4px, 0.75vh, 8px) clamp(8px, 1.5vw, 12px);
    font-size: clamp(12px, 0.75rem, 14px);
    white-space: normal;
    word-wrap: break-word;
}

/* ==============================================================================
   IMAGENS E MÍDIA
   ============================================================================== */

/* Imagens responsivas */
img {
    max-width: 100%;
    height: auto;
    display: block;
}

/* Vídeos e iframes */
iframe,
video,
embed,
object {
    max-width: 100%;
    height: auto;
}

/* SVGs */
svg {
    max-width: 100%;
    height: auto;
}

/* ==============================================================================
   LISTAS
   ============================================================================== */

/* Listas com espaçamento flexível */
ul, ol {
    padding-left: clamp(20px, 4vw, 40px);
}

li {
    margin-bottom: clamp(4px, 0.75vh, 8px);
    word-wrap: break-word;
    overflow-wrap: break-word;
}

.list-group-item {
    padding: clamp(10px, 1.5vw, 16px);
    font-size: clamp(14px, 0.875rem, 16px);
    word-wrap: break-word;
}

/* ==============================================================================
   BREADCRUMBS E PAGINAÇÃO
   ============================================================================== */

/* Breadcrumbs responsivos */
.breadcrumb {
    padding: clamp(8px, 1.5vw, 16px);
    font-size: clamp(14px, 0.875rem, 16px);
    flex-wrap: wrap;
}

.breadcrumb-item {
    white-space: normal;
    word-wrap: break-word;
}

/* Paginação */
.pagination {
    flex-wrap: wrap;
    gap: clamp(2px, 0.5vw, 4px);
}

.page-link {
    padding: clamp(6px, 1vh, 10px) clamp(10px, 1.5vw, 16px);
    font-size: clamp(14px, 0.875rem, 16px);
    min-width: clamp(36px, 5vw, 44px);
    min-height: clamp(36px, 5vh, 44px);
}

/* ==============================================================================
   ESPAÇAMENTOS FLEXÍVEIS
   ============================================================================== */

/* Margens flexíveis */
.mb-1, .my-1 { margin-bottom: clamp(4px, 0.5vh, 8px) !important; }
.mb-2, .my-2 { margin-bottom: clamp(8px, 1vh, 12px) !important; }
.mb-3, .my-3 { margin-bottom: clamp(12px, 1.5vh, 20px) !important; }
.mb-4, .my-4 { margin-bottom: clamp(16px, 2vh, 28px) !important; }
.mb-5, .my-5 { margin-bottom: clamp(24px, 3vh, 40px) !important; }

.mt-1, .my-1 { margin-top: clamp(4px, 0.5vh, 8px) !important; }
.mt-2, .my-2 { margin-top: clamp(8px, 1vh, 12px) !important; }
.mt-3, .my-3 { margin-top: clamp(12px, 1.5vh, 20px) !important; }
.mt-4, .my-4 { margin-top: clamp(16px, 2vh, 28px) !important; }
.mt-5, .my-5 { margin-top: clamp(24px, 3vh, 40px) !important; }

/* Paddings flexíveis */
.p-1 { padding: clamp(4px, 0.5vw, 8px) !important; }
.p-2 { padding: clamp(8px, 1vw, 12px) !important; }
.p-3 { padding: clamp(12px, 1.5vw, 20px) !important; }
.p-4 { padding: clamp(16px, 2vw, 28px) !important; }
.p-5 { padding: clamp(24px, 3vw, 40px) !important; }

/* ==============================================================================
   CLASSES UTILITÁRIAS PARA ZOOM
   ============================================================================== */

/* Forçar quebra de texto */
.zoom-break-text {
    word-wrap: break-word !important;
    overflow-wrap: break-word !important;
    hyphens: auto !important;
}

/* Prevenir overflow horizontal */
.zoom-no-overflow {
    overflow-x: hidden !important;
    max-width: 100% !important;
}

/* Empilhar elementos com zoom */
.zoom-stack {
    display: flex;
    flex-direction: column;
    gap: clamp(8px, 1.5vh, 16px);
}

.zoom-stack > * {
    width: 100%;
    max-width: 100%;
}

/* Container otimizado para zoom */
.zoom-container {
    max-width: 100%;
    padding: clamp(12px, 2vw, 24px);
    overflow-x: hidden;
}

/* Texto que não deve quebrar (use com cuidado) */
.zoom-nowrap {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100%;
}

/* ==============================================================================
   MEDIA QUERIES ESPECÍFICAS PARA ZOOM
   ============================================================================== */

/* Zoom de 150% ou mais */
@media (min-resolution: 1.5dppx), (min-width: 1px) and (max-width: 640px) {
    /* Forçar layout de coluna única */
    .row > [class*="col-"] {
        flex: 0 0 100%;
        max-width: 100%;
    }
    
    /* Botões ocupam largura total */
    .btn,
    button {
        width: 100%;
        margin-bottom: 8px;
    }
    
    /* Navegação empilhada */
    .navbar-nav {
        flex-direction: column;
        width: 100%;
    }
    
    /* Cards com padding reduzido */
    .card-body {
        padding: 16px;
    }
    
    /* Modais ocupam mais espaço */
    .modal-dialog {
        max-width: calc(100vw - 16px);
        margin: 8px;
    }
}

/* Zoom de 200% */
@media (min-resolution: 2dppx), (min-width: 1px) and (max-width: 480px) {
    /* Reduzir ainda mais os espaçamentos */
    .container,
    .container-fluid {
        padding-left: 8px;
        padding-right: 8px;
    }
    
    /* Títulos menores */
    h1 { font-size: 1.5rem; }
    h2 { font-size: 1.25rem; }
    h3 { font-size: 1.125rem; }
    h4, h5, h6 { font-size: 1rem; }
    
    /* Botões com padding reduzido */
    .btn,
    button {
        padding: 10px 16px;
        font-size: 16px;
    }
    
    /* Cards compactos */
    .card-body {
        padding: 12px;
    }
    
    /* Tabelas sempre empilhadas */
    table,
    thead,
    tbody,
    th,
    td,
    tr {
        display: block;
    }
    
    thead tr {
        display: none;
    }
    
    tr {
        margin-bottom: 12px;
        border: 1px solid #dee2e6;
        border-radius: 8px;
        padding: 12px;
    }
    
    td {
        text-align: left;
        padding: 8px 0;
        border: none;
    }
    
    td::before {
        content: attr(data-label);
        font-weight: 600;
        display: block;
        margin-bottom: 4px;
    }
}

/* ==============================================================================
   ACESSIBILIDADE - PREFERÊNCIAS DO USUÁRIO
   ============================================================================== */

/* Respeitar preferência de movimento reduzido */
@media (prefers-reduced-motion: reduce) {
    * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

/* ==============================================================================
   TESTES E DEBUG
   ============================================================================== */

/* Classe para testar zoom (adicionar ao body) */
.test-zoom-150 {
    zoom: 1.5;
    -moz-transform: scale(1.5);
    -moz-transform-origin: 0 0;
}

.test-zoom-200 {
    zoom: 2;
    -moz-transform: scale(2);
    -moz-transform-origin: 0 0;
}

/* Indicador visual de zoom (para testes) */
.zoom-indicator {
    position: fixed;
    bottom: 10px;
    left: 10px;
    background: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 12px;
    border-radius: 4px;
    font-size: 12px;
    z-index: 9999;
    pointer-events: none;
}

/* ==============================================================================
   CORREÇÕES ESPECÍFICAS PARA ELEMENTOS PROBLEMÁTICOS
   ============================================================================== */

/* Prevenir overflow em elementos com position absolute/fixed */
[style*="position: absolute"],
[style*="position: fixed"] {
    max-width: 100vw;
}

/* Elementos inline-block que podem causar problemas */
.d-inline-block {
    max-width: 100%;
    word-wrap: break-word;
}

/* Flexbox que pode quebrar com zoom */
.d-flex {
    flex-wrap: wrap;
    gap: clamp(4px, 1vw, 12px);
}

/* Grid que deve colapsar */
.d-grid {
    grid-template-columns: 1fr;
    gap: clamp(8px, 1.5vw, 16px);
}

/* Elementos com largura fixa */
[style*="width:"] {
    max-width: 100% !important;
}

/* ==============================================================================
   PRINT - GARANTIR BOA IMPRESSÃO MESMO COM ZOOM
   ============================================================================== */

@media print {
    /* Resetar zoom para impressão */
    html {
        zoom: 1;
        -moz-transform: scale(1);
    }
    
    /* Garantir que tudo caiba na página */
    body {
        max-width: 100%;
        overflow: visible;
    }
    
    /* Quebras de página adequadas */
    .card,
    .table,
    .alert {
        page-break-inside: avoid;
    }
}
